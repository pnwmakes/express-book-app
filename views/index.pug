doctype html
html(lang="en")
  head
    title Code & Coffee: James’s Library
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    link(rel="stylesheet", href="/styles.css")
  body
    script.
      // Apply dark mode if previously enabled
      if (localStorage.getItem('darkMode') === 'true') {
        document.documentElement.classList.add('dark');
      }

      function toggleDarkMode() {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('darkMode', isDark);
      }

    .container
      button(onclick="toggleDarkMode()" class="btn btn-dark-mode") Toggle Dark Mode

      header
        h1.title
          img(src="https://cdn-icons-png.flaticon.com/512/2935/2935301.png", alt="coffee cup", style="width: 2rem; height: 2rem;")
          | Code & Coffee: James’s Library

      // Action Buttons
      div(class="search-form")
        a(href="/add-book" class="btn btn-indigo") Add New Book
        form(action="/seed", method="POST")
          button(type="submit" class="btn btn-gray") Reset Library

      // Search Form
      form(class="search-form", action="/", method="GET")
        input(type="text", name="search", placeholder="Search books...", value=search, class="search-input")
        button(type="submit" class="btn btn-indigo") Search

      if books.length
        div(class="card-grid")
          each book in books
            div(class="card")
              img(src=book.coverUrl, alt=book.title)
              h2(class="card-title") #{book.title}
              p(class="card-author") Author: #{book.author}
              p(class="card-isbn") ISBN: #{book.isbn}
              div(class="card-actions")
                a(href=`/book/${book.isbn}` class="btn btn-blue") View
                a(href=`/edit-book/${book.isbn}` class="btn btn-yellow") Edit
                form(action=`/delete-book/${book.isbn}`, method="POST")
                  button(type="submit" class="btn btn-red full-button") Delete
      else
        p(class="text-center") No books found.

      // Back to Full List Link - moved below
      if search
        .back-link.centered(style="text-align: center; margin-top: 2rem;")
          a(href="/" class="text-blue-600") ← Back to Full Book List

    footer(class="text-center")
      | Built by James · Victory Code Bootcamp
